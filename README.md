# Malware-Analysis-Lab
* Built and operated a malware analysis lab using FlareVM and Remnux on VirtualBox.
* Performed static and dynamic analyses on the Zeus banking trojan with industry-standard tools.
* Enhanced understanding of malicious software behavior and cybersecurity threats.


## [Self-Hosted Lab]
* Download VirtualBox: https://www.virtualbox.org/wiki/Downloads
* Download Windows 10 ISO: https://info.microsoft.com/ww-landing-windows-10-enterprise.html
* Download Remnux: https://docs.remnux.org/install-distro/get-virtual-appliance
* Download Chrome:  https://www.google.com/chrome/

## [Download FlareVM]
### Requirements
FLARE-VM should ONLY be installed on a virtual machine. The VM should satisfy the following requirements:

* Windows >= 10
* PowerShell >= 5
* Disk capacity of at least 60 GB and memory of at least 2GB
* Usernames without spaces or other special characters
* Internet connection
* Tamper Protection and any Anti-Malware solution (e.g., Windows Defender) Windows Defender disabled, preferably via Group Policy
* Windows Updates Disabled

# FLARE-VM installation

* Open a PowerShell prompt as administrator
* Download the installation script installer.ps1 to your Desktop:
 * (New-Object net.webclient).DownloadFile('https://raw.githubusercontent.com/mandiant/flare-vm/main/install.ps1',"$([Environment]::GetFolderPath("Desktop"))\install.ps1")
* Unblock the installation script:
 * Unblock-File .\install.ps1
* Enable script execution:
 * Set-ExecutionPolicy Unrestricted -Force
  * If you receive an error saying the execution policy is overridden by a policy defined at a more specific scope, you may need to pass a scope in via Set-ExecutionPolicy Unrestricted -Scope CurrentUser -Force. To view execution policies for all scopes, execute Get-ExecutionPolicy -List
* Finally, execute the installer script as follow:
 * .\install.ps1
  * To pass your password as an argument: .\install.ps1 -password <password>
  * To use the CLI-only mode with minimal user interaction: .\install.ps1 -password <password> -noWait -noGui
  * To use the CLI-only mode with minimal user interaction and a custom config file: .\install.ps1 -customConfig <config.xml> -password <password> -noWait -noGui
After installation it is recommended to switch to host-only networking mode and take a VM snapshot


[Install JQ]
sudo apt install jq

[Install Terraform]
sudo apt-get update && sudo apt-get install -y gnupg software-properties-common

wget O https://apt.releases.hashicorp.com/gpg | \
gpg --dearmor | \
sudo tee /usr/share/keyrings/hashicorp-archive-keyring.gpg

gpg --no-default-keyring \
--keyring /usr/share/keyrings/hashicorp-archive-keyring.gpg \
--fingerprint

echo "deb [signed-by=/usr/share/keyrings/hashicorp-archive-keyring.gpg] \
https://apt.releases.hashicorp.com $(lsb_release -cs) main" | \
sudo tee /etc/apt/sources.list.d/hashicorp.list

sudo apt update

sudo apt-get install terraform

[Install AWS CLI]
sudo apt install awscli -y

[Clone AWS Malware Lab GitHub Repo]
git clone https://github.com/adanalvarez/AWS-ma...

[Create File]
nano shared.auto.tfvars.json

[Configuration File]
{ 
    "environment": "malware-lab",
    "ami": "ami-xxxxxxxxxxxxxxxxx",
    "account" : "222222222222",
    "region": "us-east-1",
    "enable_guacamole": false,
    "enable_inetsim": true
}

[Terraform Commands]
- terraform init: Initialize the environment.
- terraform plan: Plan the configuration.
- terraform apply: Apply the configuration file to AWS account.
- terraform destroy: Destroy the environment once analysis has been conducted.
